import React from 'react';
import { useEffect, useState } from 'react';
import { Layout, Breadcrumb, theme, Descriptions, Row, Col, Button, Form, Input } from 'antd';
import { useParams } from 'react-router-dom';
import { Link } from 'react-router-dom';
import '../../pages/manager/groupDetails.css';
import "draft-js-mention-plugin/lib/plugin.css";
import { EditorState, convertToRaw } from "draft-js";
import Editor from "draft-js-plugins-editor";
import createMentionPlugin, {
  defaultSuggestionsFilter
} from "draft-js-mention-plugin";
import mentions from "./mentions";
import {
  detailGroup
} from '../../../src/services/axiosInstance';

const { TextArea } = Input;
const { Content } = Layout;
export default function GroupDetailsPage() {
  //mentions
  const { id } = useParams();
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [ master, setMaster ] = useState();
  console.log("1234",master);
  const [isTitle, setTitle] = useState('');
  const [groupDetail, setGroupDetail] = useState(null);
  const [formValues, setFormValues] = useState({});
  // console.log(groupDetail);
  const getGroupDetail = async (id) => {
    const res = await detailGroup(id);
    setFormValues(res);
    const masterInGroup =res?.masters?.map((item) => item );
    setMaster(masterInGroup);
  };
  useEffect(() => {
    getGroupDetail(id);
  }, []);
  const {
    token: { colorBgContainer },
  } = theme.useToken();

  const onFinish = (values) => {
    console.log('Received values of form: ', values);
  };

  const layout = {
    labelCol: {
      span: 4,
    },
    wrapperCol: {
      span: 16,
    },
  };
  const tailLayout = {
    wrapperCol: { offset: 16, span: 8 },
  };
  
  // console.log("ðŸš€ ~ file: groupDetails.manager.jsx:48 ~ GroupDetailsPage ~ formValues:", formValues)
  return (
    <>
      <Content
        style={{
          margin: '0 16px',
        }}
      >
        <Breadcrumb
          style={{
            margin: '16px 0',
          }}
        >
          <Breadcrumb.Item>
            <Link to='/manager'>Manager</Link>
          </Breadcrumb.Item>
          <Breadcrumb.Item>
            <Link to='/manager/group'>Group</Link>
          </Breadcrumb.Item>
          <Breadcrumb.Item>
            <Link to='/manager/group/details'>Details</Link>
          </Breadcrumb.Item>
        </Breadcrumb>

        <Row
          style={{
            padding: 24,
            minHeight: 600,
            background: colorBgContainer,
          }}
        >
          <Col span={24}>
            <Descriptions title='Basic information' />
            <Form
              {...layout}
              name='normal_login'
              className='login-form'
              onFinish={onFinish}
              colon={false}
              initialValues={formValues}
            >
              <Form.Item  label='Group Name'>
                <Input value={formValues.name} name='name' className='form-input' />
              </Form.Item>
              <Form.Item name='master' label='Masters'>
                <TextArea rows={6}>
                  {/* {master.map((item) =>{
                    <p>{item.firstName}</p>
                  })} */}
                </TextArea>
              </Form.Item>
              <Form.Item name='member' label='Members'>
                <TextArea rows={6} />
              </Form.Item>

              <Form.Item {...tailLayout}>
                <Button className='info-form-button'>Cancel</Button>
                <Button htmlType='submit' className='info-form-button'>
                  Send
                </Button>
              </Form.Item>
            </Form>
          </Col>
        </Row>
      </Content>
    </>
  );
}
